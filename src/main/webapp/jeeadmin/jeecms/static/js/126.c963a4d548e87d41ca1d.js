webpackJsonp([126],{"2TVX":function(e,t,n){"use strict";function i(e){n("9IOD")}Object.defineProperty(t,"__esModule",{value:!0});var a=n("HzJ8"),r=n.n(a),o=n("5HJ5"),s=n("2sCs"),l=n.n(s),d={mixins:[o.a],data:function(){return{params:{queryStatus:"",queryTypeId:"",queryTopLevel:"",queryRecommend:"",queryUsername:"",queryTitle:"",queryOrderBy:"",querySiteId:"",pageNo:"",pageSize:""},types:[],labelDialogTitle:"",dialogVisible:!1,operateType:"",currentCheckChannelId:"",props:{label:"name",children:"zones",isLeaf:"isChild",id:"id"}}},methods:{getTableData:function(e){var t=this;this.loading=!0,l.a.post(this.$api.departmentList,e).then(function(e){t.tableData=e.body,t.total=pages.body.totalCount,t.loading=!1}).catch(function(e){t.loading=!1})},getPriority:function(){var e=[],t=!0,n=!1,i=void 0;try{for(var a,o=r()(this.checkedList);!(t=(a=o.next()).done);t=!0){var s=a.value;e.push(s.priority)}}catch(e){n=!0,i=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw i}}return e.join(",")},handleClose:function(e){e()},ansyTree:function(e,t){if(0===e.level)return t([{name:"根目录",id:"",isChild:!0}]);e.level>0&&l.a.post(this.$api.channelList,{parentId:e.data.id}).then(function(e){var n=[];for(var i in e.body){var a={};a.id=e.body[i].id,a.isChild=!(e.body[i].childCount>0),a.name=e.body[i].name,n.push(a)}return t(n)})},operate:function(e){this.dialogVisible=!0,this.operateType=e,this.labelDialogTitle=("copy"==e?"复制":"引用")+this.$getSiteName()},checkChange:function(e,t,n){t&&(this.currentCheckChannelId=e.id,this.$refs.channelTree.setCheckedKeys([e.id],!0))},confirm:function(){var e=this,t="",n={};if(n.channelId=this.currentCheckChannelId,n.ids=this.ids,"copy"==this.operateType)t=this.$api.contentCopy,n.siteId=this.$getSiteId();else{if("cite"!=this.operateType)return!1;t=this.$api.contentRefer}this.loading=!0,l.a.post(t,n).then(function(t){"200"==t.code&&(e.loading=!1,e.dialogVisible=!1,e.successMessage("copy"==e.operateType?"复制成功":"引用成功"))}).catch(function(t){e.loading=!1})}},created:function(){this.getTableData(this.params)},watch:{$route:function(e,t){var n=this.$route.query.id;this.params.root=n>0?n:"",this.getTableData(this.params)}}},c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[n("div",{staticClass:"cms-list-header"},[n("el-button",{directives:[{name:"perms",rawName:"v-perms",value:"/department/save",expression:"'/department/save'"}],attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){e.routerLink("/department/save","save",0,{pid:0})}}},[e._v("添加")])],1),e._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:""},on:{"selection-change":e.checkIds}},[n("el-table-column",{attrs:{type:"selection",width:"65",align:"right"}}),e._v(" "),n("el-table-column",{attrs:{prop:"id",label:"ID",width:"60",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"name",label:"名称",align:"left"}}),e._v(" "),n("el-table-column",{attrs:{label:"排序",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{attrs:{type:"number"},model:{value:t.row.priority,callback:function(n){e.$set(t.row,"priority",n)},expression:"scope.row.priority"}})]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"name",label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return n("div",{},[n("button",{directives:[{name:"perms",rawName:"v-perms",value:"/department/memberList",expression:"'/department/memberList'"}],staticClass:"btn list",attrs:{title:"查看部门成员列表"},on:{click:function(n){e.routerLink("/department/memberList","lsit",t.row.id)}}},[n("i",{staticClass:"iconfont icon-gengduo"})]),e._v(" "),n("button",{directives:[{name:"perms",rawName:"v-perms",value:"/department/update",expression:"'/department/update'"}],staticClass:"btn edit",attrs:{title:"修改"},on:{click:function(n){e.routerLink("/department/update","update",t.row.id)}}},[n("i",{staticClass:"iconfont icon-weibiaoti101"})]),e._v(" "),n("button",{directives:[{name:"perms",rawName:"v-perms",value:"/department/delete",expression:"'/department/delete'"}],staticClass:"btn delete",attrs:{title:"删除"},on:{click:function(n){e.deleteBatch(e.$api.departmentDelete,t.row.id)}}},[n("i",{staticClass:"iconfont icon-shanchu1"})])])}}])})],1),e._v(" "),n("div",{staticClass:"cms-list-footer"},[n("div",{staticClass:"cms-left"},[n("el-button",{directives:[{name:"perms",rawName:"v-perms",value:"/department/delete",expression:"'/department/delete'"}],attrs:{disabled:e.disabled},on:{click:function(t){e.deleteBatch(e.$api.departmentDelete,e.ids)}}},[e._v("批量删除")]),e._v(" "),n("el-button",{directives:[{name:"perms",rawName:"v-perms",value:"/department/priority",expression:"'/department/priority'"}],attrs:{disabled:e.disabled},on:{click:function(t){e.priorityBatch(e.$api.departmentPriority,e.ids,e.getPriority())}}},[e._v("保存排列顺序")])],1)])],1)},p=[],u={render:c,staticRenderFns:p},h=u,m=n("Z0/y"),b=i,f=m(d,h,!1,b,"data-v-30ba9d66",null);t.default=f.exports},"9IOD":function(e,t,n){var i=n("Xwhc");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n("FIqI")("37702e87",i,!0,{})},Xwhc:function(e,t,n){t=e.exports=n("UTlt")(!1),t.push([e.i,"\n.tree-left[data-v-30ba9d66]{\n    width: 200px;\n    float: left;\n}\n.tree-right[data-v-30ba9d66]{\n    margin-left: 200px;\n}\n.cms-body table .btn[data-v-30ba9d66] {\n    margin-top: 5px;\n    display: inline-block;\n    height: 24px;\n    width: 24px;\n    min-width: 0px;\n    line-height: 24px;\n    padding: 0px;\n    font-size: 14px;\n    color: #ffffff;\n    margin-left: 2px;\n    border: 0px;\n    border-radius: 4px;\n    -webkit-box-sizing: border-box;\n            box-sizing: border-box;\n    line-height: 1;\n}\n.cms-body table .btn .iconfont[data-v-30ba9d66]{\n  font-size: 14px;\n  font-weight: 100;\n  color: #ffffff;\n}\n.list[data-v-30ba9d66]{\n background-color: #409EFF;\n}\n.edit[data-v-30ba9d66]{\n  background-color: #17D57E\n}\n.delete[data-v-30ba9d66]{\n  background-color: #FF8B53;\n}\n.list[data-v-30ba9d66]:hover,\n.delete[data-v-30ba9d66]:hover,\n.edit[data-v-30ba9d66]:hover{\n  cursor: pointer;\n}\n",""])}});